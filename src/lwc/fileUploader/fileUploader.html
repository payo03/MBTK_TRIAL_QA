<template>

    <div class="slds-grid slds-wrap slds-size_1-of-1">

        <!-- <div class="slds-p-around_small slds-p-bottom_none slds-size_4-of-7"> -->
        <div class="slds-p-around_small slds-p-bottom_none slds-small-size_1-of-1 slds-medium-size_4-of-7 title-wrap">
            <div class="slds-card__header slds-grid">
                <lightning-icon icon-name="utility:copy_to_clipboard" alternative-text="Utility image" size="small" title="Image"></lightning-icon>
                <h2 class="slds-card__header-title">
                    <span class="slds-p-left_medium" style="font-size: 24px; font-weight: bold;">필수 파일 첨부</span>
                </h2>
            </div>

            <div class="slds-m-vertical_small box-wrap">
                <div class="slds-card__header slds-grid">
                    <header class="slds-media slds-media_center slds-has-flexi-truncate">
                        <div class="slds-media__figure">
                            <span class="slds-icon_container slds-icon-standard-account" title="account">
                                    <lightning-icon icon-name="action:add_file" alternative-text="Utility image" size="x-small" title="Image"></lightning-icon>
                                <span class="slds-assistive-text">주민등록증</span>
                            </span>
                        </div>
                        <div class="slds-media__body">
                            <h2 class="slds-card__header-title">
                                <span>주민등록증</span>
                            </h2>
                        </div>
                    </header>
                </div>
                <div class="slds-card__body slds-card__body_inner">
                    <div class="slds-grid slds-wrap">
                        <div class="file-selector-large">
                            <lightning-file-upload
                                label="파일 업로드"
                                name="fileUploader"
                                accept={acceptedFormats}
                                data-name="주민등록증"
                                record-id={recordId}
                                onuploadfinished={handleOnUploadFinished}>
                            </lightning-file-upload>
                        </div>
                    </div>
        
                    <template if:true={file1Details}>
                        <div class="pill-container slds-p-top_small">
                            <lightning-pill 
                                data-key={file1Details.key} label={file1Details.title} data-name="regNum" onremove={handleRemove}>
                            </lightning-pill>
                        </div>
                    </template>
                    <!-- <template if:true={file1Details}>
                        <p>{file1Details}</p>
                    </template> -->
                </div>
            </div>

            <div class="slds-m-vertical_small box-wrap">
                <div class="slds-card__header slds-grid">
                    <header class="slds-media slds-media_center slds-has-flexi-truncate">
                        <div class="slds-media__figure">
                            <span class="slds-icon_container slds-icon-standard-account" title="account">
                                <lightning-icon icon-name="action:add_file" alternative-text="Utility image" size="x-small" title="Image"></lightning-icon>
                                <span class="slds-assistive-text">사업자등록증</span>
                            </span>
                        </div>
                        <div class="slds-media__body">
                            <h2 class="slds-card__header-title">
                                <span>사업자등록증</span>
                            </h2>
                        </div>
                    </header>
                </div>
                <div class="slds-card__body slds-card__body_inner">
                    <div class="slds-grid slds-wrap">
                        <div class="file-selector-large">
                            <lightning-file-upload
                                label="파일 업로드"
                                name="fileUploader"
                                accept={acceptedFormats}
                                data-name="사업자등록증"
                                record-id={recordId}
                                onuploadfinished={handleOnUploadFinished}>
                            </lightning-file-upload>
                        </div>
                    </div>

                    <template if:true={file2Details}>
                        <div class="pill-container slds-p-top_small">
                            <lightning-pill 
                                data-key={file2Details.key} label={file2Details.title} data-name="bizNum" onremove={handleRemove}>
                            </lightning-pill>
                        </div>
                    </template>
                    <!-- <template if:true={file2Details}>
                        <p>{file2Details}</p>
                    </template> -->
                </div>
            </div>

            <div class="slds-m-vertical_small box-wrap">
                <div class="slds-card__header slds-grid">
                    <header class="slds-media slds-media_center slds-has-flexi-truncate">
                        <div class="slds-media__figure">
                            <span class="slds-icon_container slds-icon-standard-account" title="account">
                                <lightning-icon icon-name="action:add_file" alternative-text="Utility image" size="x-small" title="Image"></lightning-icon>
                                <span class="slds-assistive-text">부가세후취</span>
                            </span>
                        </div>
                        <div class="slds-media__body">
                            <h2 class="slds-card__header-title">
                                <span>부가세후취</span>
                            </h2>
                        </div>
                    </header>
                </div>
                <div class="slds-card__body slds-card__body_inner">
                    <div class="slds-grid slds-wrap">
                        <div class="file-selector-large">
                            <lightning-file-upload
                                label="파일 업로드"
                                name="fileUploader"
                                accept={acceptedFormats}
                                data-name="부가세후취"
                                record-id={recordId}
                                onuploadfinished={handleOnUploadFinished}
                                disabled={isVATFalse}
                                multiple>
                            </lightning-file-upload>
                        </div>
                    </div>
        
                    <template if:true={file3Details}>
                        <div class="pill-container slds-p-top_small">
                            <template for:each={file3Details} for:item="file" for:index="index">
                                <lightning-pill 
                                    key={file.key} data-key={file.key} label={file.title} data-name="vat" onremove={handleRemove}>
                                </lightning-pill>
                            </template>
                        </div>
                    </template>
                    <!-- <template if:true={file3Details}>
                        <p>{file3Details}</p>
                    </template> -->
                </div>
            </div>
        </div>
        
        <!-- <div class="slds-p-around_small slds-p-bottom_none slds-size_3-of-7"> -->
        <div class="slds-p-around_small slds-p-bottom_none slds-small-size_1-of-1 slds-medium-size_3-of-7 title-wrap">

            <div class="slds-card__header slds-grid">
                <lightning-icon icon-name="utility:answer" alternative-text="Utility image" size="medium" title="Image"></lightning-icon>
                <h2 class="slds-card__header-title">
                    <span class="slds-p-left_medium" style="font-size: 24px; font-weight: bold;">파일 업로드 하는 방법</span>
                </h2>
            </div>
            <!-- <div class="slds-card__header slds-grid " style="font-size: 24px; font-weight: bold;">파일 업로드 하는 방법</div> -->
             <div class="box-wrap">
                <div class="slds-p-around_small slds-p-bottom_none">
                    <dl>
                        <br/>
                        <strong style="font-size: 20px;">파일 업로드</strong>
                        <dd style="font-size: 15px;">[파일 업로드] 버튼을 클릭하거나,</dd>
                        <dd style="font-size: 15px;">각 영역에 파일을 드래그해서 업로드 가능합니다.</dd>
                        <br/>
                        <strong style="font-size: 20px;">업로드 가능한 파일 유형</strong>
                        <dd style="font-size: 15px;">업로드할 수 있는 파일 유형은 다음과 같습니다.</dd>
                        <dd style="font-size: 15px;">PDF 파일, 이미지 파일(.jpg, .png)</dd>
                        <br/>
                        <strong style="font-size: 20px;">주민등록증</strong>
                        <dd style="font-size: 15px; color: red;">주민등록증 관련 파일을 하나만 업로드 해주세요.</dd>
                        <br/>
                        <strong style="font-size: 20px;">사업자등록증</strong>
                        <dd style="font-size: 15px; color: red;">사업자등록증 관련 파일을 하나만 업로드 해주세요.</dd>
                        <br/>
                        <strong style="font-size: 20px;">부가세후취</strong>
                        <dd style="font-size: 15px;">부가세후취 관련 파일은 총 6개 이상부터 저장이 가능합니다.</dd>
                        <br/>
                        <strong style="font-size: 20px;">부가세후취 관련</strong>
                        <dd style="font-size: 15px; color:red">부가세 후취 상태가 승인됨이어야지만 부가세후취 파일 업로드 가능합니다.</dd>
                        <br/>
                        <strong style="font-size: 20px;">파일업로드 관련</strong>
                        <dd style="font-size: 15px; color:red">부가세 후취 파일은 한번에 최대 10개 첨부가능합니다.</dd>
                        <br/>
                    </dl>
                </div>
            </div>
        </div>

    </div>

    <template lwc:if={isLoading}>
        <lightning-spinner alternative-text="Loading" variant="brand" size="medium"></lightning-spinner>
    </template>

    <div slot="footer" class="slds-align_absolute-center">
        <div class="slds-m-around_small slds-align_absolute-center">
            <lightning-button
                class="slds-m-right_xx-small"
                label="취소"
                onclick={handleCancel}>
            </lightning-button>
            <lightning-button
                variant="brand"
                class=""
                type="submit"
                label="저장"
                onclick={handleSave}>
            </lightning-button>
        </div>
    </div>
    
</template>